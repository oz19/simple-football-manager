{% extends '_base.html' %}
{% load crispy_forms_tags %}


{% block content %}
<div class='container'>

    <!-- General info -->
    <div class='row mt-5'>
        <div class='col text-center'>
            <h1>Simple Football Manager</h1>
            <p>{{ user.email }}</p>
            <p>Reputation: {{ user.reputation }}</p>
        </div>
    </div>

    <!-- Stage management -->
    <div class='row mt-5'>
        <div class='col'>

            <h3 class='mt-2'>Preseason</h3>
            <p class='mt-4'>You are planning the season. At this point it is expected you to spend a big part of your budget. Invest in players, staff, marketing... whatever you want. When you are done, click on 'Go!' to advance to the next stage. Good luck!</p>

            <ul class="nav nav-tabs mt-4" id="myTab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active text-dark" id="challenge-tab" data-toggle="tab" href="#challenge" role="tab" aria-controls="challenge" aria-selected="true">1. Challenge info</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-dark" id="reputation-tab" data-toggle="tab" href="#reputation" role="tab" aria-controls="reputation" aria-selected="true">2. Challenge performance</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-dark" id="budget-tab" data-toggle="tab" href="#budget" role="tab" aria-controls="budget" aria-selected="false">3. Budget management</a>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent">

                <!-- Challenge -->
                <div class="tab-pane fade show active" id="challenge" role="tabpanel" aria-labelledby="challenge-tab">
                    <p class='mt-4'>Season budget: <strong>{{ season_budget }} €</strong></p>
                    <p class='mt-4'>Available cash: <strong>{{ cash }} €</strong></p>
                    <p class='mt-4'>Challenge target: <strong>Position {{ target }}</strong></p>
                    <p class='mt-4'>Challenge difficulty: <strong>{{ difficulty }}/10</strong></p>
                </div>

                <!-- Reputation -->
                <div class="tab-pane fade" id="reputation" role="tabpanel" aria-labelledby="reputation-tab">

                    <p class='mt-4'>Position on league: <strong>{{ current_position }}</strong> <span class='small'>[target {{ target }}]</span></p>
                    <div class="progress">
                        <div class="progress-bar bg-info" role="progressbar" style="width: {{ target_percentage }}%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <div class="progress">
                        <div class="progress-bar bg-{{ current_position_color }}" role="progressbar" style="width: {{ current_position_percentage }}%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>

                    <p class='mt-4'>Evaluation: <strong>{{ score }}</strong> <span class='small'>[difficulty {{ difficulty }}]</span></p>
                    <div class="progress">
                        <div class="progress-bar bg-info" role="progressbar" style="width: {{ difficulty_percentage }}%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <div class="progress">
                        <div class="progress-bar bg-{{ score_color }}" role="progressbar" style="width: {{ score_percentage }}%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>

                </div>

                <!-- Budget -->
                <div class="tab-pane fade" id="budget" role="tabpanel" aria-labelledby="budget-tab">
                    <form method='post' class='mt-4'>
                        {% csrf_token %}
                        {{ form | crispy }}
                        <input type='submit' class='btn btn-dark mt-2' value='Go!' />
                    </form>
                </div>

            </div>
        </div>
    </div>
 
</div>
{% endblock content%}
